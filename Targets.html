<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyFlow - –¶–µ–ª–∏</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
    <style>
        :root {
            --bg-light: #f3f4f8;
            --sidebar-bg: #7484d2;
            --card-bg: #a9baf0;
            --nav-item-bg: #8c9be4;
            --nav-item-active-bg: #4f5b93;
            --progress-bar-bg: #e0e0e0;
            --progress-bar-fill: #34d399;
            --text-light: #ffffff;
            --text-dark: #333333;
            --font-family: 'Nunito', sans-serif;
        }

        body {
            margin: 0;
            font-family: var(--font-family);
            background-color: var(--bg-light);
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
       body[data-theme="blue"] {
            --sidebar-bg: #4169E1; 
            --card-bg: #4169E1; 
            --nav-item-bg: #4682B4;
            --nav-item-active-bg: #3b5974;
            --progress-bar-fill: #228B22; 
        }
         .theme-btn.orange { background-color: #E49B0F; }
         
        body[data-theme="orange"] {
            --bg-light: #FFC300;           
            --sidebar-bg: #E49B0F;         
            --card-bg: #D9534F;           
            --nav-item-bg: #C94A46;         
            --nav-item-active-bg: #A93E3A;  
            --progress-bar-fill: #4285F4;   
            --text-dark: #333333;          
        }

        .dashboard-container { display: flex; min-height: 100vh; }
        .sidebar { background-color: var(--sidebar-bg); padding: 2rem 1.5rem; width: 250px; flex-shrink: 0; color: var(--text-light); box-sizing: border-box; display: flex; flex-direction: column; }
        .logo { font-size: 2rem; font-weight: 800; text-align: center; margin-bottom: 3rem; }
        .sidebar ul { list-style: none; padding: 0; margin: 0; }
        .sidebar ul li a { display: block; padding: 1rem 1.5rem; margin-bottom: 1rem; border-radius: 12px; text-decoration: none; color: var(--text-light); background-color: var(--nav-item-bg); font-weight: 700; transition: background-color 0.3s ease; }
        .sidebar ul li a.active { background-color: var(--nav-item-active-bg); }
        .sidebar ul li a:hover { background-color: #6a7ac5; }
        
        .main-content { flex-grow: 1; padding: 2rem; display: flex; flex-direction: column; gap: 2rem; }
        .top-section { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; }
        .card { border-radius: 20px; padding: 1.5rem; box-sizing: border-box; }
        .card h2 { margin-top: 0; margin-bottom: 1.5rem; font-size: 1.5rem; font-weight: 800; }
        
        .new-goal-card { background-color: #ffffff; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .form-group { margin-bottom: 1rem; }
        .form-group input, .form-group textarea { width: 100%; padding: 0.8rem 1rem; border: 1px solid #e0e0e0; background-color: var(--bg-light); box-sizing: border-box; font-family: var(--font-family); font-size: 1rem; border-radius: 12px; }
        .form-group textarea { min-height: 80px; resize: vertical; }
        .form-buttons { display: flex; gap: 1rem; margin-top: 1.5rem; }
        .form-buttons button { flex: 1; padding: 0.8rem; border: none; font-size: 1rem; font-weight: 700; color: var(--text-light); border-radius: 12px; cursor: pointer; transition: background-color 0.3s ease; }
        .btn-secondary { background-color: var(--nav-item-bg); }
        .btn-secondary:hover { background-color: #6a7ac5; }
        .btn-primary { background-color: var(--progress-bar-fill); }
        .btn-primary:hover { background-color: #2cb88a; }
        
        .tips-card { background-color: var(--card-bg); display: flex; flex-direction: column; }
        .tip-content { flex-grow: 1; display: flex; justify-content: center; align-items: center; background-color: rgba(255, 255, 255, 0.5); margin-bottom: 1rem; border-radius: 12px; font-weight: 700; padding: 1rem; }
        .tip-content span { white-space: pre-wrap; line-height: 1.6; text-align: center; }
        .pagination { display: flex; justify-content: space-between; gap: 0.5rem; }
        .pagination span { flex: 1; text-align: center; padding: 0.5rem; background-color: rgba(255, 255, 255, 0.5); border-radius: 8px; font-weight: 700; }
        
        .all-goals-section h2 { font-size: 1.5rem; font-weight: 800; margin-bottom: 1.5rem; }
        .goals-list { display: flex; flex-direction: column; gap: 1rem; }
        .goal-item { background-color: #ffffff; box-shadow: 0 4px 10px rgba(0,0,0,0.05); padding: 1rem 1.5rem; border-radius: 15px; }
        .goal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; flex-wrap: wrap; gap: 0.5rem;}
        .goal-header h3 { margin: 0; font-size: 1.2rem; font-weight: 700; }
        .goal-deadline { display: flex; align-items: center; gap: 0.5rem; font-weight: 700; font-size: 0.9rem; }
        .goal-deadline input[type="checkbox"] { width: 18px; height: 18px; }
        .goal-item p { margin: 0 0 1rem 0; color: #555; }
        
        .progress-bar-container { background-color: #f3f4f8; border-radius: 999px; height: 10px; width: 100%; overflow: hidden; border: 1px solid #e0e0e0; }
        .progress-bar { background-color: var(--progress-bar-fill); height: 100%; border-radius: 999px; }

        .theme-switcher { margin-top: auto; padding-top: 2rem; }
        .theme-switcher h4 { text-align: center; margin-bottom: 0.5rem; }
        .theme-buttons { display: flex; justify-content: center; gap: 1rem; }
        .theme-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid white; cursor: pointer; }
        .theme-btn.purple { background-color: #7484d2; }
        .theme-btn.blue { background-color: #4169E1; }

        .mobile-header { display: none; background-color: var(--sidebar-bg); padding: 1rem; color: var(--text-light); justify-content: space-between; align-items: center; }
        .mobile-menu-btn { background: none; border: none; color: var(--text-light); font-size: 1.5rem; cursor: pointer; }
        .goaldialog{margin-top:auto; background:white; width: 80%; max-width: 600px; margin-bottom: auto; border: 2px; cursor: pointer; border-radius:15px;}
        
        dialog::backdrop{background-color:rgba(0,0,0,0.5)}

        .goaldialog header {
            font-family: var(--font-family);
            background:linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px 12px 0 0;
        }
        .goaldialog .content {
            padding: 20px;
        }

        .dialogclosebutton{
            position:absolute;
            padding: 5x;
            top: 15px;
            right:15px;
            font-size:15px;
            width:30px;
            height:30px;
            display:flex;
            border-radius:50%;
            align-items:center;
            justify-content:center;
            background: none;
            border:none;
            transition: all 0.3s ease;
        }
        .dialogclosebutton:hover{
            background: rgba(0,0,0,0.1);
            transform:scale(1.1);
        }

        .stepped-slider {
            width: 100%;
            margin: 10px 0;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }
        
        .slider-labels span {
            text-align: center;
            width: 40px;
        }
        
        .slider-with-steps {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            outline: none;
            margin: 5px 0;
        }
        
        .current-value {
            text-align: center;
            font-size: 15px;
            font-weight: bold;
            color: #667eea;
            margin: 2px 0;
        }


        .picker-group {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
        }
        
        input {
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #667eea;
            border-radius: 6px;
            width: 250px;
            font-size: 16px;
        }


                .subtask-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        
        .subtask-input {
            flex: 1;
            padding: 8px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .remove-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .add-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 0;
        }

        .subtask-section {margin: 25px 0; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #667eea;
        }


        .btn-primary { background: #667eea; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-success { background: #28a745; color: white; }
        
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .btn {
            padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer;
            font-size: 16px; transition: all 0.3s;
        }
        /* .subtask {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .subtask input, .subtask textarea, .subtask select {
            width: 100%;
            margin: 5px 0;
            padding: 8px;
        } */

            .subtask {
        padding: 20px;
        margin: 15px 0;
        background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        border-radius: 20px;
        border: 2px solid #90caf9;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
    }

    .subtask input, .subtask textarea, .subtask select {
        width: 100%;
        margin: 8px 0;
        padding: 12px;
        border: 2px solid #90caf9;
        border-radius: 15px;
        background: white;
        font-size: 14px;
        box-sizing: border-box;
    }

    .subtask input:focus, .subtask textarea:focus, .subtask select:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
    }

    .delete-btn {
        background: #ff6b6b;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 15px;
        cursor: pointer;
        margin-top: 10px;
    }

    .delete-btn:hover {
        background: #ff5252;
        transform: translateY(-2px);
    }

        
        /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
        @media (max-width: 992px) {
            .top-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-container { flex-direction: column; }
            .mobile-header { display: flex; }
            .sidebar { position: fixed; top: 0; left: -100%; height: 100vh; z-index: 1000; width: 280px; transition: left 0.3s ease; }
            .sidebar.active { left: 0; }
            .main-content { padding: 1rem; gap: 1rem; }
            .card { padding: 1rem; }
            .form-buttons { flex-direction: column; }
            .subtask-section {
            margin: 25px 0; padding: 20px; background: #f8f9fa;
            border-radius: 10px; border-left: 4px solid #667eea;
        }

        }
    </style>
</head>



<body>

    <div class="dashboard-container">


        <header class="mobile-header">
            <button class="mobile-menu-btn">‚ò∞</button>
            <h1 class="logo" style="margin: 0; font-size: 1.5rem;">StudyFlow</h1>
            <div style="width: 40px;"></div>
        </header>

        <nav class="sidebar">
            <h1 class="logo">StudyFlow</h1>
            <ul>
                 <li><a href="index.html" >–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="#"class="active">–¶–µ–ª–∏</a></li>
                <li><a href="Analitics.html">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
                <li><a href="Calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</a></li>
                <li><a href="Achievments.html">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a></li>
                <li><a href="Profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a></li>
            </ul>
            <div class="theme-switcher">
                <h4>–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</h4>
                <div class="theme-buttons">
                    <button data-set-theme="default" class="theme-btn purple"></button>
                    <button data-set-theme="blue" class="theme-btn blue"></button>
                    <!-- <button data-set-theme="orange" class="theme-btn orange"></button>  -->
                </div>
            </div>
        </nav>

        <main class="main-content">
            <div class="top-section">

                <div class="card new-goal-card">
                    <h2>–ù–æ–≤–∞—è —Ü–µ–ª—å</h2>
                    <div class="form-buttons">
                        <button class="btn-secondary">–î–µ–¥–ª–∞–π–Ω</button>
                        <button class="btn-primary" onclick = showgoalDialog()>–°–æ–∑–¥–∞—Ç—å</button>

                    </div>
                </div>



                <div class="card tips-card">
                    <h2>–°–æ–≤–µ—Ç—ã</h2>
                    <div class="tip-content">
                        <span>–£–ø–∞–ª - –≤—Å—Ç–∞–≤–∞–π
–í—Å—Ç–∞–ª - —É–ø–∞–π
–£–ø–∞–π - —á–æ–∫–æ–ø–∞–π
–ù–µ —Å—É–¥–∏, –Ω–µ –≥—É–¥–∏, –Ω–µ –±—É–¥–∞–π –≤–∞–¥–∞ –±—É–¥–∏
–î–∞–±—É–¥–∏, –¥–∞–±—É–¥–∞–π!</span>
                    </div>
                    <div class="pagination">
                        <span>&larr;</span>
                        <span>1/n</span>
                        <span>&rarr;</span>
                    </div>
                </div>
            </div>
            
            <div class="all-goals-section">
                <h2>–í—Å–µ —Ü–µ–ª–∏</h2>
                <div class="goals-list">
                    <div class="goal-item">
                        <div class="goal-header">
                            <h3>–ü–æ—Å—Ç—É–ø–∏—Ç—å –Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π</h3>
                            <div class="goal-deadline">
                                <span>15.11.2025</span>
                                <input type="checkbox">
                            </div>
                        </div>
                        <p>–Ø –∫–∞–∫ –°–æ–ª –ì—É–¥–º–∞–Ω –±—É–¥—É :)</p>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 69%;"></div>
                        </div>
                    </div>
                    <div class="goal-item">
                        <div class="goal-header">
                            <h3>–£–±–∏—Ç—å –¥—Ä–∞–∫–æ–Ω–∞ –≤ –º–∞–π–Ω–∫—Ä–∞—Ñ—Ç–µ –Ω–∞ —Ö–∞—Ä–¥–∫–æ—Ä–µ</h3>
                            <div class="goal-deadline">
                                <span>20.11.2025</span>
                                <input type="checkbox">
                            </div>
                        </div>
                        <p>–î–æ–±—É–¥—å —Ö–æ—Ç—è –±—ã 2 –∞–ª–º–∞–∑–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ, —á–µ–ª...</p>
                        <div class="progress-bar-container">
                             <div class="progress-bar" style="width: 23%;"></div>
                        </div>
                    </div>
                    <div class="goal-item">
                        <div class="goal-header">
                            <h3>–ö—É–ø–∏—Ç—å —à–∞–≤–µ—Ä–º—É –Ω–∞ —Ä—ã–Ω–∫–µ</h3>
                            <div class="goal-deadline">
                                <span>01.12.2025</span>
                                <input type="checkbox">
                            </div>
                        </div>
                        <p>–ù–µ –ø–æ–±–æ—è—Ç—Å—è –∏ —Ä–∏—Å–∫–Ω—É—Ç—å, –≤–æ—Ç —Ç–∞–∫ –∏ —Ä–æ–∂–¥–∞—é—Ç—Å—è –º–∏–ª–ª–∏–æ–Ω–µ—Ä—ã</p>
                        <div class="progress-bar-container">
                             <div class="progress-bar" style="width: 96%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>


    </div>







    <div class = "goaldialog">

            <dialog id = "new-goal-modal" method = "goaldialog" class = "goaldialog">
                <header>
            <h2>üéØ –¢–≤–æ—è –Ω–æ–≤–∞—è —Ü–µ–ª—å</h2>
        </header>
                <form method = "dialog">

                <div class="card new-goal-card">

                    <h2>üìç–û–ø–∏—Å–∞–Ω–∏–µ</h2>

                    <div class="form-group">
                        <input type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    </div>

                    <div class="form-group">
                        <textarea placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                    <h2>üß©–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</h2>

                    <div class="stepped-slider">
                        <label>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="range" id="stepSlider" class = "slider-with-steps" min="0" max="10" value="10" step = "1">
                        <div class = "slider-labels">
                            <span>–û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ</span><span>–°—Ä–µ–¥–Ω–µ</span><span>–û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ</span>
                        </div>
                        <div class="current-value" id="stepValue"></div>
                    </div>
                    </div>
                    <h2>‚ö†Ô∏è–í–∞–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</h2>

                    <div class="stepped-slider">
                        <label>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="range" id="stepSlider2" class = "slider-with-steps" min="0" max="10" value="10" step = "1">
                        <div class = "slider-labels">
                            <span>–ù–µ –≤–∞–∂–Ω–∞—è</span><span>–°—Ä–µ–¥–Ω—è—è</span><span>–û—á–µ–Ω—å –≤–∞–∂–Ω–∞—è</span>
                        </div>
                        <div class="current-value" id="stepValue2"></div>
                    </div>

                

                    <h2>üìÖ –í—ã–±–µ—Ä–∏ –¥–µ–¥–ª–∞–π–Ω</h2>
                    <div class = "picker-group">
                    <input type="datetime-local" id="dateTime" placeholder="–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è">
                    </div>
                    <button class = "dialogclosebutton"> <i class="fa-solid fa-xmark"></i> </button> 
                    <button class = "dialogclosebutton"> <i class="fa-solid fa-xmark"></i> </button> 




                    <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–∑–∞–¥–∞—á -->
            <div class="subtask-section">
                <h3>‚ûï –ü–æ–¥–∑–∞–¥–∞—á–∏</h3>
                <button type="button" class="btn btn-success" onclick="addSubtask()">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É
                </button>


                
                <div id="subtasksContainer">
                    <!-- –ü–æ–¥–∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                                     

                </div>
            </div>

            <div class="actions">
                <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" class="btn btn-primary" onclick="saveTask()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–∞—á—É</button>
            </div>
        </div>
            
                </div>
            </form>

 
        </dialog>
    </div>







<script>

// –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –ü–ï–†–ï–î —Ñ—É–Ω–∫—Ü–∏–µ–π addSubtask
const difficultylabels = [
    "0", "1", "2", "3", "4", "5",
    "6", "7", "8", "9", "10"
];

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö —Å–ª–∞–π–¥–µ—Ä–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö)
document.addEventListener('input', function(e) {
    if (e.target.id && e.target.id.startsWith('stepSlidersubtask-')) {
        const slider = e.target;
        const valueId = slider.id.replace('stepSlidersubtask-', 'stepValuesubtask-');
        const valueElement = document.getElementById(valueId);
        
        if (valueElement) {
            valueElement.textContent = difficultylabels[slider.value];
        }
    }
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–∞–π–¥–µ—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    const existingSliders = document.querySelectorAll('[id^="stepSlidersubtask-"]');
    existingSliders.forEach(slider => {
        const valueId = slider.id.replace('stepSlidersubtask-', 'stepValuesubtask-');
        const valueElement = document.getElementById(valueId);
        if (valueElement) {
            valueElement.textContent = difficultylabels[slider.value];
        }
    });
});
    
    const themeButtons = document.querySelectorAll('[data-set-theme]');
    const storageKey = 'studyflow-theme';
    const goaldialog = document.querySelector('#new-goal-modal');

    const applyTheme = (theme) => {
        document.body.setAttribute('data-theme', theme === 'default' ? '' : theme);
    };


    function showgoalDialog(){
        goaldialog.showModal()
    }

        flatpickr("#dateTime", {
        static:true,
        enableTime: true,
        dateFormat: "d.m.Y H:i",
        time_24hr: true,
        locale: "ru"
    });



    const stepSlider = document.getElementById('stepSlider');
    const stepValue = document.getElementById('stepValue');

    const stepSlider2 = document.getElementById('stepSlider2');
    const stepValue2 = document.getElementById('stepValue2');

    const stepSlider3 = document.getElementById('stepSlider3');
    const stepValue3 = document.getElementById('stepValue3');
    

    

    

        const difficultyLabels = {
            1: '1',
            2: "2",
            3:"3",
            4:"4",
            5:'5',
            6:"6",
            7:"7",
            8:"8",
            9:"9",
            10:"10"
        };
        
        stepSlider.addEventListener('input', function() {
            stepValue.textContent = difficultyLabels[this.value];
        });

        stepSlider2.addEventListener('input', function() {
            stepValue2.textContent = difficultyLabels[this.value];
        });

        stepSlider3.addEventListener('input', function() {
            stepValue3.textContent = difficultyLabels[this.value];
        });




                // –°–û–ó–î–ê–ï–ú –ó–ê–î–ê–ß–£
        const task = {
            id: Date.now(), title: mainTitle,
            description: document.getElementById('mainTaskDescription').value.trim(),
            subtasks, createdAt: new Date().toLocaleString('ru-RU'), completed: false
        };

        // –°–û–•–†–ê–ù–Ø–ï–ú
        tasks.push(task);
        localStorage.setItem('tasks', JSON.stringify(tasks));
        renderTasks();
        closeTaskModal();
        alert('‚úÖ –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
    

    // –°–ë–†–û–° –§–û–†–ú–´
    function resetForm() {
        document.getElementById('mainTaskTitle').value = '';
        document.getElementById('mainTaskDescription').value = '';
        document.getElementById('subtasksContainer').innerHTML = '';
        subtaskCounter = 0;
    }


        function initializeDatePickers() {
        document.querySelectorAll('.subtask-deadline').forEach(input => {
            if (!input._flatpickr) {
                flatpickr(input, {
                    dateFormat: "d.m.Y", locale: "ru", minDate: "today"
                });
            }
        });
    }

        function addSubtaskField() {
        const container = document.getElementById('subtasksContainer');
        container.innerHTML += createSubtaskField();
        initializeDatePickers();}



        function addSubtask() {
    const container = document.getElementById('subtasksContainer');
    const subtaskId = 'subtask-' + Date.now();
    // const newSlider = document.getElementById(`stepSlidersubtask-${subtaskId}`);
    // const newValue = document.getElementById(`stepValuesubtask-${subtaskId}`);
    
    container.innerHTML += `

        <div class="subtask" id="${subtaskId}">
            <input type="text" placeholder="üìù –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏">
            <textarea placeholder="üìã –û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                <h2>‚ö†Ô∏è–í–∞–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</h2>
                    <div class="stepped-slider">
                        <label>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="range" id="stepSlidersubtask-${subtaskId}" class="slider-with-steps" min="0" max="10" value="0">
                        <div class = "slider-labels">
                            <span>–ù–µ –≤–∞–∂–Ω–∞—è</span><span>–°—Ä–µ–¥–Ω—è—è</span><span>–û—á–µ–Ω—å –≤–∞–∂–Ω–∞—è</span>
                        </div>
                        <div class="current-value" id="stepValuesubtask-${subtaskId}"></div>
                    </div>
            <button onclick="document.getElementById('${subtaskId}').remove()" class="delete-btn">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </div>
    `;
        }



        //     stepSlidersubtask.addEventListener('input', function() {
        //     stepValuesubtask.textContent = difficultyLabels[this.value];
        // });

        //  const stepSlidersubtask = document.getElementById('stepSlidersubtask');
        // const stepValuesubtask = document.getElementById('stepValuesubtask');
        // }




        function saveTask() {
        const mainTitle = document.getElementById('mainTaskTitle').value.trim();
        
        if (!mainTitle) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–¥–∞—á–∏');
            return;
        }}
        function renderTasks() {
        const container = document.getElementById('tasksContainer');
        
        if (tasks.length === 0) {
            container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á</p>';
            return;
        }}

        





    themeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const theme = button.dataset.setTheme;
            applyTheme(theme);
            localStorage.setItem(storageKey, theme);
        });
    });



    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem(storageKey);
        if (savedTheme) applyTheme(savedTheme);

        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const sidebar = document.querySelector('.sidebar');
        if (mobileMenuBtn && sidebar) {
            mobileMenuBtn.addEventListener('click', () => sidebar.classList.toggle('active'));
            document.addEventListener('click', (e) => {
                if (!sidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    sidebar.classList.remove('active');
                }
            });
        }
    });
</script>
</body>
</html>