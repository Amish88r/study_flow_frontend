<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyFlow - –¶–µ–ª–∏</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
</head>



<body>

    <div class="dashboard-container">


        <header class="mobile-header">
            <button class="mobile-menu-btn">‚ò∞</button>
            <h1 class="logo" style="margin: 0; font-size: 1.5rem;">StudyFlow</h1>
            <div style="width: 40px;"></div>
        </header>

        <nav class="sidebar">
            <h1 class="logo">StudyFlow</h1>
            <ul>
                 <li><a href="index.html" >–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="#"class="active">–¶–µ–ª–∏</a></li>
                <li><a href="Analitics.html">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
                <li><a href="Calendar.html">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</a></li>
                <li><a href="Achievments.html">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a></li>
                <li><a href="Profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a></li>
            </ul>
            <div class="theme-switcher">
                <h4>–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É</h4>
                <div class="theme-buttons">
                    <button data-set-theme="default" class="theme-btn purple"></button>
                    <button data-set-theme="blue" class="theme-btn blue"></button>
                    <!-- <button data-set-theme="orange" class="theme-btn orange"></button>  -->
                </div>
            </div>
        </nav>

        <main class="main-content">
            <div class="top-section">

                <div class="card new-goal-card">
                    <h2>–ù–æ–≤–∞—è —Ü–µ–ª—å</h2>
                    <div class="form-buttons">
                        <button class="btn-secondary">–î–µ–¥–ª–∞–π–Ω</button>
                        <button class="btn-primary" onclick = showgoalDialog()>–°–æ–∑–¥–∞—Ç—å</button>

                    </div>
                </div>



                <div class="card tips-card">
                    <h2>–°–æ–≤–µ—Ç—ã</h2>
                    <div class="tip-content">
                        <span>–£–ø–∞–ª - –≤—Å—Ç–∞–≤–∞–π
–í—Å—Ç–∞–ª - —É–ø–∞–π
–£–ø–∞–π - —á–æ–∫–æ–ø–∞–π
–ù–µ —Å—É–¥–∏, –Ω–µ –≥—É–¥–∏, –Ω–µ –±—É–¥–∞–π –≤–∞–¥–∞ –±—É–¥–∏
–î–∞–±—É–¥–∏, –¥–∞–±—É–¥–∞–π!</span>
                    </div>
                    <div class="pagination">
                        <span>&larr;</span>
                        <span>1/n</span>
                        <span>&rarr;</span>
                    </div>
                </div>
            </div>
            
            <div class="all-goals-section">
                <h2>–í—Å–µ —Ü–µ–ª–∏</h2>
                <div class="goals-list">
                    <div class="goal-item">
                        <div class="goal-header">
                            <h3>–ü–æ—Å—Ç—É–ø–∏—Ç—å –Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π</h3>
                            <div class="goal-deadline">
                                <span>15.11.2025</span>
                                <input type="checkbox">
                            </div>
                        </div>
                        <p>–Ø –∫–∞–∫ –°–æ–ª –ì—É–¥–º–∞–Ω –±—É–¥—É :)</p>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 69%;"></div>
                        </div>
                    </div>
                    <div class="goal-item">
                        <div class="goal-header">
                            <h3>–£–±–∏—Ç—å –¥—Ä–∞–∫–æ–Ω–∞ –≤ –º–∞–π–Ω–∫—Ä–∞—Ñ—Ç–µ –Ω–∞ —Ö–∞—Ä–¥–∫–æ—Ä–µ</h3>
                            <div class="goal-deadline">
                                <span>20.11.2025</span>
                                <input type="checkbox">
                            </div>
                        </div>
                        <p>–î–æ–±—É–¥—å —Ö–æ—Ç—è –±—ã 2 –∞–ª–º–∞–∑–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ, —á–µ–ª...</p>
                        <div class="progress-bar-container">
                             <div class="progress-bar" style="width: 23%;"></div>
                        </div>
                    </div>
                    <div class="goal-item">
                        <div class="goal-header">
                            <h3>–ö—É–ø–∏—Ç—å —à–∞–≤–µ—Ä–º—É –Ω–∞ —Ä—ã–Ω–∫–µ</h3>
                            <div class="goal-deadline">
                                <span>01.12.2025</span>
                                <input type="checkbox">
                            </div>
                        </div>
                        <p>–ù–µ –ø–æ–±–æ—è—Ç—Å—è –∏ —Ä–∏—Å–∫–Ω—É—Ç—å, –≤–æ—Ç —Ç–∞–∫ –∏ —Ä–æ–∂–¥–∞—é—Ç—Å—è –º–∏–ª–ª–∏–æ–Ω–µ—Ä—ã</p>
                        <div class="progress-bar-container">
                             <div class="progress-bar" style="width: 96%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>


    </div>







    <div class = "goaldialog">

            <dialog id = "new-goal-modal" method = "goaldialog" class = "goaldialog">
                <header>
            <h2>üéØ –¢–≤–æ—è –Ω–æ–≤–∞—è —Ü–µ–ª—å</h2>
        </header>
                <form method = "dialog">

                <div class="card new-goal-card">

                    <h2>üìç–û–ø–∏—Å–∞–Ω–∏–µ</h2>

                    <div class="form-group">
                        <input type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    </div>

                    <div class="form-group">
                        <textarea placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                    <h2>üß©–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</h2>

                    <div class="stepped-slider">
                        <label>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="range" id="stepSlider" class = "slider-with-steps" min="0" max="10" value="10" step = "1">
                        <div class = "slider-labels">
                            <span>–û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ</span><span>–°—Ä–µ–¥–Ω–µ</span><span>–û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ</span>
                        </div>
                        <div class="current-value" id="stepValue"></div>
                    </div>
                    </div>
                    <h2>‚ö†Ô∏è–í–∞–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</h2>

                    <div class="stepped-slider">
                        <label>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="range" id="stepSlider2" class = "slider-with-steps" min="0" max="10" value="10" step = "1">
                        <div class = "slider-labels">
                            <span>–ù–µ –≤–∞–∂–Ω–∞—è</span><span>–°—Ä–µ–¥–Ω—è—è</span><span>–û—á–µ–Ω—å –≤–∞–∂–Ω–∞—è</span>
                        </div>
                        <div class="current-value" id="stepValue2"></div>
                    </div>

                

                    <h2>üìÖ –í—ã–±–µ—Ä–∏ –¥–µ–¥–ª–∞–π–Ω</h2>
                    <div class = "picker-group">
                    <input type="datetime-local" id="dateTime" placeholder="–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è">
                    </div>
                    <button class = "dialogclosebutton"> <i class="fa-solid fa-xmark"></i> </button> 
                    <button class = "dialogclosebutton"> <i class="fa-solid fa-xmark"></i> </button> 




                    <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–∑–∞–¥–∞—á -->
            <div class="subtask-section">
                <h3>‚ûï –ü–æ–¥–∑–∞–¥–∞—á–∏</h3>
                <button type="button" class="btn btn-success" onclick="addSubtask()">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É
                </button>


                
                <div id="subtasksContainer">
                    <!-- –ü–æ–¥–∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
                                     

                </div>
            </div>

            <div class="actions">
                <button type="button" class="btn btn-secondary" onclick="closeTaskModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" class="btn btn-primary" onclick="saveTask()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–∞—á—É</button>
            </div>
        </div>
            
                </div>
            </form>

 
        </dialog>
    </div>







<script>

// –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –ü–ï–†–ï–î —Ñ—É–Ω–∫—Ü–∏–µ–π addSubtask
const difficultylabels = [
    "0", "1", "2", "3", "4", "5",
    "6", "7", "8", "9", "10"
];

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö —Å–ª–∞–π–¥–µ—Ä–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö)
document.addEventListener('input', function(e) {
    if (e.target.id && e.target.id.startsWith('stepSlidersubtask-')) {
        const slider = e.target;
        const valueId = slider.id.replace('stepSlidersubtask-', 'stepValuesubtask-');
        const valueElement = document.getElementById(valueId);
        
        if (valueElement) {
            valueElement.textContent = difficultylabels[slider.value];
        }
    }
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–∞–π–¥–µ—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    const existingSliders = document.querySelectorAll('[id^="stepSlidersubtask-"]');
    existingSliders.forEach(slider => {
        const valueId = slider.id.replace('stepSlidersubtask-', 'stepValuesubtask-');
        const valueElement = document.getElementById(valueId);
        if (valueElement) {
            valueElement.textContent = difficultylabels[slider.value];
        }
    });
});
    
    const themeButtons = document.querySelectorAll('[data-set-theme]');
    const storageKey = 'studyflow-theme';
    const goaldialog = document.querySelector('#new-goal-modal');

    const applyTheme = (theme) => {
        document.body.setAttribute('data-theme', theme === 'default' ? '' : theme);
    };


    function showgoalDialog(){
        goaldialog.showModal()
    }

        flatpickr("#dateTime", {
        static:true,
        enableTime: true,
        dateFormat: "d.m.Y H:i",
        time_24hr: true,
        locale: "ru"
    });



    const stepSlider = document.getElementById('stepSlider');
    const stepValue = document.getElementById('stepValue');

    const stepSlider2 = document.getElementById('stepSlider2');
    const stepValue2 = document.getElementById('stepValue2');

    const stepSlider3 = document.getElementById('stepSlider3');
    const stepValue3 = document.getElementById('stepValue3');
    

    

    

        const difficultyLabels = {
            1: '1',
            2: "2",
            3:"3",
            4:"4",
            5:'5',
            6:"6",
            7:"7",
            8:"8",
            9:"9",
            10:"10"
        };
        
        stepSlider.addEventListener('input', function() {
            stepValue.textContent = difficultyLabels[this.value];
        });

        stepSlider2.addEventListener('input', function() {
            stepValue2.textContent = difficultyLabels[this.value];
        });

        stepSlider3.addEventListener('input', function() {
            stepValue3.textContent = difficultyLabels[this.value];
        });




                // –°–û–ó–î–ê–ï–ú –ó–ê–î–ê–ß–£
        const task = {
            id: Date.now(), title: mainTitle,
            description: document.getElementById('mainTaskDescription').value.trim(),
            subtasks, createdAt: new Date().toLocaleString('ru-RU'), completed: false
        };

        // –°–û–•–†–ê–ù–Ø–ï–ú
        tasks.push(task);
        localStorage.setItem('tasks', JSON.stringify(tasks));
        renderTasks();
        closeTaskModal();
        alert('‚úÖ –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
    

    // –°–ë–†–û–° –§–û–†–ú–´
    function resetForm() {
        document.getElementById('mainTaskTitle').value = '';
        document.getElementById('mainTaskDescription').value = '';
        document.getElementById('subtasksContainer').innerHTML = '';
        subtaskCounter = 0;
    }


        function initializeDatePickers() {
        document.querySelectorAll('.subtask-deadline').forEach(input => {
            if (!input._flatpickr) {
                flatpickr(input, {
                    dateFormat: "d.m.Y", locale: "ru", minDate: "today"
                });
            }
        });
    }

        function addSubtaskField() {
        const container = document.getElementById('subtasksContainer');
        container.innerHTML += createSubtaskField();
        initializeDatePickers();}



        function addSubtask() {
    const container = document.getElementById('subtasksContainer');
    const subtaskId = 'subtask-' + Date.now();
    // const newSlider = document.getElementById(`stepSlidersubtask-${subtaskId}`);
    // const newValue = document.getElementById(`stepValuesubtask-${subtaskId}`);
    
    container.innerHTML += `

        <div class="subtask" id="${subtaskId}">
            <input type="text" placeholder="üìù –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏">
            <textarea placeholder="üìã –û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
                <h2>‚ö†Ô∏è–í–∞–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏</h2>
                    <div class="stepped-slider">
                        <label>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å:</label>
                        <input type="range" id="stepSlidersubtask-${subtaskId}" class="slider-with-steps" min="0" max="10" value="0">
                        <div class = "slider-labels">
                            <span>–ù–µ –≤–∞–∂–Ω–∞—è</span><span>–°—Ä–µ–¥–Ω—è—è</span><span>–û—á–µ–Ω—å –≤–∞–∂–Ω–∞—è</span>
                        </div>
                        <div class="current-value" id="stepValuesubtask-${subtaskId}"></div>
                    </div>
            <button onclick="document.getElementById('${subtaskId}').remove()" class="delete-btn">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </div>
    `;
        }



        //     stepSlidersubtask.addEventListener('input', function() {
        //     stepValuesubtask.textContent = difficultyLabels[this.value];
        // });

        //  const stepSlidersubtask = document.getElementById('stepSlidersubtask');
        // const stepValuesubtask = document.getElementById('stepValuesubtask');
        // }




        function saveTask() {
        const mainTitle = document.getElementById('mainTaskTitle').value.trim();
        
        if (!mainTitle) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–¥–∞—á–∏');
            return;
        }}
        function renderTasks() {
        const container = document.getElementById('tasksContainer');
        
        if (tasks.length === 0) {
            container.innerHTML = '<p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á</p>';
            return;
        }}

        





    themeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const theme = button.dataset.setTheme;
            applyTheme(theme);
            localStorage.setItem(storageKey, theme);
        });
    });



    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem(storageKey);
        if (savedTheme) applyTheme(savedTheme);

        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const sidebar = document.querySelector('.sidebar');
        if (mobileMenuBtn && sidebar) {
            mobileMenuBtn.addEventListener('click', () => sidebar.classList.toggle('active'));
            document.addEventListener('click', (e) => {
                if (!sidebar.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
                    sidebar.classList.remove('active');
                }
            });
        }
    });
</script>
</body>
</html>